import{r as g,a as P,o as S,w as V,u as E,c as r,b as e,d as y,e as N,t as d,f as v,n as c,F as A,g as $,h as j,i as u,v as x,j as M,k as i}from"./index-Dcx7StCk.js";import{u as I}from"./agenda-DASfgFQx.js";const O={class:"flex justify-between items-center mb-6"},U={class:"flex gap-2"},B={class:"bg-white p-3 shadow-sm rounded-lg mb-4 flex justify-between items-center gap-4 border border-gray-200"},D={class:"text-xs text-gray-400 font-mono pl-2"},T={class:"flex bg-gray-100 p-1 rounded-md border border-gray-200"},L={class:"bg-white rounded-lg shadow overflow-hidden border border-gray-200"},F={class:"min-w-full divide-y divide-gray-200"},R={class:"bg-white divide-y divide-gray-200"},z={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},G={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},q={class:"text-xs"},K={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},H=["href"],J={key:1},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Y=["onClick"],Z=["onClick"],ee={key:0},te={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center"},se={class:"relative mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},oe={class:"mt-3"},ae={class:"text-lg leading-6 font-medium text-gray-900 mb-4"},le={class:"mb-4"},ne={class:"mb-4"},re={class:"mb-4"},ie={class:"mb-4"},de={class:"mb-4"},ue={class:"mb-4 flex items-center"},be={__name:"PersonaList",props:{isStacked:{type:Boolean,default:!1}},emits:["close","select"],setup(f,{emit:ce}){const l=I(),p=g(!1),b=g(!1),m=g(null),n=g("active"),o=P({nombre_completo:"",celular_personal:"",email_personal:"",linkedin:"",observaciones:"",activo:!0});S(()=>{l.fetchPersonas({status:n.value})}),V(n,a=>{l.fetchPersonas({status:a})});const h=(a=null)=>{a?(b.value=!0,m.value=a.id,o.nombre_completo=a.nombre_completo,o.celular_personal=a.celular_personal,o.email_personal=a.email_personal,o.linkedin=a.linkedin,o.observaciones=a.observaciones,o.activo=a.activo):(b.value=!1,m.value=null,o.nombre_completo="",o.celular_personal="",o.email_personal="",o.linkedin="",o.observaciones="",o.activo=!0),p.value=!0},w=()=>{p.value=!1},k=async()=>{try{b.value?await l.updatePersona(m.value,o):await l.createPersona(o),w()}catch(a){alert("Error al guardar la persona."),console.error(a)}},_=async a=>{if(confirm(`Â¿EstÃ¡ seguro de dar de baja a ${a.nombre_completo}?`))try{await l.updatePersona(a.id,{...a,activo:!1}),await l.fetchPersonas({status:n.value})}catch(t){alert("Error al dar de baja."),console.error(t)}};return E({F10:()=>{p.value&&k()}}),(a,t)=>(i(),r("div",{class:c(["p-6",f.isStacked?"bg-white":""])},[e("div",O,[t[12]||(t[12]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Agenda Global (Personas)",-1)),e("div",U,[f.isStacked?(i(),r("button",{key:0,onClick:t[0]||(t[0]=s=>a.$emit("close")),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Volver ")):y("",!0),e("button",{onClick:t[1]||(t[1]=s=>h()),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2"},[...t[11]||(t[11]=[e("span",{class:"text-xl"},"+",-1),N(" NUEVA PERSONA ",-1)])])])]),e("div",B,[e("span",D,d(v(l).personas.length)+" Registros (Mostrando) ",1),e("div",T,[e("button",{onClick:t[2]||(t[2]=s=>n.value="all"),class:c(["px-4 py-1.5 text-xs font-bold rounded transition-all",n.value==="all"?"bg-white text-gray-800 shadow-sm ring-1 ring-gray-200":"text-gray-500 hover:text-gray-700"])}," TODOS ",2),e("button",{onClick:t[3]||(t[3]=s=>n.value="active"),class:c(["px-4 py-1.5 text-xs font-bold rounded transition-all",n.value==="active"?"bg-[#54cb9b] text-white shadow-sm":"text-gray-500 hover:text-gray-700"])}," ACTIVOS ",2),e("button",{onClick:t[4]||(t[4]=s=>n.value="inactive"),class:c(["px-4 py-1.5 text-xs font-bold rounded transition-all",n.value==="inactive"?"bg-gray-600 text-white shadow-sm":"text-gray-500 hover:text-gray-700"])}," INACTIVOS ",2)])]),e("div",L,[e("table",F,[t[14]||(t[14]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nombre Completo"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Contacto Personal"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Redes"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Observaciones"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones")])],-1)),e("tbody",R,[(i(!0),r(A,null,$(v(l).personas,s=>(i(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",z,d(s.nombre_completo),1),e("td",G,[e("div",null,d(s.email_personal),1),e("div",q,d(s.celular_personal),1)]),e("td",K,[s.linkedin?(i(),r("a",{key:0,href:s.linkedin,target:"_blank",class:"text-blue-600 hover:underline"},"LinkedIn",8,H)):(i(),r("span",J,"-"))]),e("td",Q,d(s.observaciones||"-"),1),e("td",W,[e("span",{class:c(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",s.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},d(s.activo?"Activo":"Inactivo"),3)]),e("td",X,[e("button",{onClick:C=>h(s),class:"text-blue-600 hover:text-blue-900 mr-3"},"Editar",8,Y),e("button",{onClick:C=>_(s),class:"text-red-400 hover:text-red-600",title:"Dar de Baja"}," ðŸ—‘ï¸ ",8,Z)])]))),128)),v(l).personas.length===0?(i(),r("tr",ee,[...t[13]||(t[13]=[e("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"}," No hay personas registradas. ",-1)])])):y("",!0)])])]),p.value?(i(),r("div",te,[e("div",se,[e("div",oe,[e("h3",ae,d(b.value?"Editar Persona":"Nueva Persona"),1),e("form",{onSubmit:j(k,["prevent"])},[e("div",le,[t[15]||(t[15]=e("label",{class:"block text-gray-700 text-sm font-bold mb-2"},"Nombre Completo",-1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.nombre_completo=s),type:"text",required:"",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[x,o.nombre_completo]])]),e("div",ne,[t[16]||(t[16]=e("label",{class:"block text-gray-700 text-sm font-bold mb-2"},"Email Personal",-1)),u(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.email_personal=s),type:"email",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[x,o.email_personal]])]),e("div",re,[t[17]||(t[17]=e("label",{class:"block text-gray-700 text-sm font-bold mb-2"},"Celular Personal",-1)),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.celular_personal=s),type:"text",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[x,o.celular_personal]])]),e("div",ie,[t[18]||(t[18]=e("label",{class:"block text-gray-700 text-sm font-bold mb-2"},"LinkedIn",-1)),u(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>o.linkedin=s),type:"url",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[x,o.linkedin]])]),e("div",de,[t[19]||(t[19]=e("label",{class:"block text-gray-700 text-sm font-bold mb-2"},"Observaciones",-1)),u(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=s=>o.observaciones=s),class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[x,o.observaciones]])]),e("div",ue,[u(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.activo=s),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[M,o.activo]]),t[20]||(t[20]=e("label",{class:"ml-2 block text-gray-900 text-sm"},"Activo",-1))]),e("div",{class:"flex justify-end gap-2 mt-4"},[e("button",{type:"button",onClick:w,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300"},"Cancelar"),t[21]||(t[21]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"},"Guardar",-1))])],32)])])])):y("",!0)],2))}};export{be as default};
