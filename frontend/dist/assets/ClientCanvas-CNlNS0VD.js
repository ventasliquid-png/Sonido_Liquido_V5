import{r as h,m as L,c as i,k as n,b as e,e as I,i as y,v as $,t as v,n as A,d as g,F as T,g as U,h as R,y as ce,z as pe,l as be,o as xe,w as ve,B as K,j as Ee,C as De,a as Ve,p as Te,q as te,s as G,x as Le,D as oe,E as Ae,G as Ne,S as Oe,H as Ue,I as Re,J as je}from"./index-CbJ9Xo6G.js";import{u as ze}from"./agenda-B9QBvuLr.js";const Fe={class:"p-6 h-full flex flex-col bg-[#0a1f2e]"},Pe={class:"flex justify-between items-center mb-6 shrink-0"},Me={class:"flex gap-2"},Be={class:"bg-white/5 p-3 rounded-lg mb-4 flex justify-between items-center gap-4 border border-white/10 shrink-0"},Ge={class:"flex items-center gap-4 flex-1"},Ke={class:"relative flex-1 max-w-md"},He={class:"text-xs text-white/40 font-mono"},qe={class:"flex bg-black/20 p-1 rounded-md border border-white/10"},Je={class:"bg-white/5 rounded-lg border border-white/10 flex-1 overflow-hidden flex flex-col"},We={class:"overflow-y-auto flex-1 scrollbar-thin scrollbar-thumb-white/10"},Xe={class:"min-w-full divide-y divide-white/10"},Ye={class:"divide-y divide-white/5"},Qe={key:0},Ze=["onClick"],et={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-white"},tt={key:0,class:"text-white/50 font-normal ml-1"},ot={class:"px-6 py-4 whitespace-nowrap text-sm text-white/70"},lt={class:"px-6 py-4 whitespace-nowrap"},st={key:0,class:"px-2 py-0.5 inline-flex text-[10px] leading-5 font-bold rounded-full border bg-purple-500/10 text-purple-400 border-purple-500/20"},nt={key:1,class:"px-2 py-0.5 inline-flex text-[10px] leading-5 font-bold rounded-full border bg-gray-700/50 text-gray-400 border-gray-600"},it={class:"px-6 py-4 whitespace-nowrap text-white/70"},at=["title"],rt={key:0,class:"fa-solid fa-store text-cyan-400"},dt={key:1,class:"fa-solid fa-truck text-amber-400"},ut={key:2,class:"fa-solid fa-motorcycle text-blue-400"},ct={key:3,class:"fa-solid fa-laptop text-purple-400"},pt={class:"text-xs font-medium"},bt={key:1,class:"text-white/20 text-xs"},xt={class:"px-6 py-4 whitespace-nowrap"},vt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ft=["onClick"],mt=["onClick"],wt={__name:"DomicilioList",props:{domicilios:{type:Array,default:()=>[]}},emits:["close","create","edit","delete"],setup(k,{emit:E}){const w=k,u=h(""),p=h("todos"),f=b=>b?b.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase():"",D=L(()=>{let b=w.domicilios;if(p.value==="activos"&&(b=b.filter(r=>r.activo)),p.value==="inactivos"&&(b=b.filter(r=>!r.activo)),u.value){const r=f(u.value);b=b.filter(d=>f(d.calle).includes(r)||f(d.localidad).includes(r))}return b.sort((r,d)=>r.es_fiscal&&!d.es_fiscal?-1:!r.es_fiscal&&d.es_fiscal?1:(r.alias||r.calle||"").localeCompare(d.alias||d.calle||"")),b});return(b,r)=>(n(),i("div",Fe,[e("div",Pe,[r[7]||(r[7]=e("h1",{class:"text-2xl font-bold text-white font-outfit"},"Administrar Domicilios",-1)),e("div",Me,[e("button",{onClick:r[0]||(r[0]=d=>b.$emit("close")),class:"px-4 py-2 text-white/50 hover:text-white transition-colors"}," Volver "),e("button",{onClick:r[1]||(r[1]=d=>b.$emit("create")),class:"bg-cyan-600 hover:bg-cyan-500 text-white px-4 py-2 rounded-lg flex items-center gap-2 font-bold shadow-lg shadow-cyan-900/20 transition-all"},[...r[6]||(r[6]=[e("i",{class:"fa-solid fa-plus"},null,-1),I(" NUEVO DOMICILIO ",-1)])])])]),e("div",Be,[e("div",Ge,[e("div",Ke,[r[8]||(r[8]=e("i",{class:"fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-white/30"},null,-1)),y(e("input",{"onUpdate:modelValue":r[2]||(r[2]=d=>u.value=d),type:"text",placeholder:"Buscar por calle, localidad...",class:"w-full bg-black/20 border border-white/10 rounded-lg pl-10 pr-4 py-1.5 text-sm text-white focus:outline-none focus:border-cyan-400 transition-colors"},null,512),[[$,u.value]])]),e("span",He,v(D.value.length)+" Registros ",1)]),e("div",qe,[e("button",{onClick:r[3]||(r[3]=d=>p.value="todos"),class:A(["px-4 py-1.5 text-xs font-bold rounded transition-all",p.value==="todos"?"bg-white/10 text-white shadow-sm":"text-white/50 hover:text-white"])}," TODOS ",2),e("button",{onClick:r[4]||(r[4]=d=>p.value="activos"),class:A(["px-4 py-1.5 text-xs font-bold rounded transition-all",p.value==="activos"?"bg-green-500/20 text-green-400 shadow-sm border border-green-500/30":"text-white/50 hover:text-white"])}," ACTIVOS ",2),e("button",{onClick:r[5]||(r[5]=d=>p.value="inactivos"),class:A(["px-4 py-1.5 text-xs font-bold rounded transition-all",p.value==="inactivos"?"bg-red-500/20 text-red-400 shadow-sm border border-red-500/30":"text-white/50 hover:text-white"])}," INACTIVOS ",2)])]),e("div",Je,[e("div",We,[e("table",Xe,[r[12]||(r[12]=e("thead",{class:"bg-black/20 sticky top-0 z-10 backdrop-blur-sm"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-bold text-white/50 uppercase tracking-wider"},"Calle y N√∫mero"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-white/50 uppercase tracking-wider"},"Localidad"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-white/50 uppercase tracking-wider"},"Tipo"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-white/50 uppercase tracking-wider"},"Entrega"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-white/50 uppercase tracking-wider"},"Estado"),e("th",{class:"px-6 py-3 text-right text-xs font-bold text-white/50 uppercase tracking-wider"},"Acciones")])],-1)),e("tbody",Ye,[D.value.length===0?(n(),i("tr",Qe,[...r[9]||(r[9]=[e("td",{colspan:"5",class:"px-6 py-8 text-center text-white/30"},[e("i",{class:"fa-solid fa-magnifying-glass mb-2 text-2xl opacity-50 block"}),I(" No se encontraron resultados. ")],-1)])])):g("",!0),(n(!0),i(T,null,U(D.value,d=>(n(),i("tr",{key:d.id,class:A(["hover:bg-white/5 cursor-pointer transition-colors group",{"opacity-50 grayscale":!d.activo}]),onClick:x=>b.$emit("edit",d)},[e("td",et,[I(v(d.calle)+" "+v(d.numero)+" ",1),d.piso||d.depto?(n(),i("span",tt," ("+v(d.piso)+" "+v(d.depto)+") ",1)):g("",!0)]),e("td",ot,v(d.localidad),1),e("td",lt,[d.es_fiscal?(n(),i("span",st," FISCAL ")):(n(),i("span",nt," SUCURSAL "))]),e("td",it,[d.metodo_entrega?(n(),i("div",{key:0,class:"flex items-center gap-2",title:d.metodo_entrega},[d.metodo_entrega==="RETIRO_LOCAL"?(n(),i("i",rt)):d.metodo_entrega==="TRANSPORTE"?(n(),i("i",dt)):d.metodo_entrega==="FLETE_MOTO"?(n(),i("i",ut)):d.metodo_entrega==="PLATAFORMA"?(n(),i("i",ct)):g("",!0),e("span",pt,v(d.metodo_entrega.replace("_"," ")),1)],8,at)):(n(),i("span",bt,"-"))]),e("td",xt,[e("span",{class:A(["px-2 py-0.5 inline-flex text-[10px] leading-5 font-bold rounded-full border",d.activo?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"])},v(d.activo?"ACTIVO":"INACTIVO"),3)]),e("td",vt,[e("button",{onClick:R(x=>b.$emit("edit",d),["stop"]),class:"text-cyan-400 hover:text-cyan-300 mr-4 transition-colors text-lg",title:"Editar"},[...r[10]||(r[10]=[e("i",{class:"fa-solid fa-pencil w-4 h-4"},null,-1)])],8,ft),!d.es_fiscal&&d.activo?(n(),i("button",{key:0,onClick:R(x=>b.$emit("delete",d),["stop"]),class:"text-red-400 hover:text-red-300 transition-colors text-lg",title:"Dar de Baja"},[...r[11]||(r[11]=[e("i",{class:"fa-solid fa-trash w-4 h-4"},null,-1)])],8,mt)):g("",!0)])],10,Ze))),128))])])])])]))}},ht={key:0,class:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"},gt={class:"bg-[#0a253a] border border-white/10 rounded-xl w-full max-w-md shadow-2xl overflow-hidden flex flex-col max-h-[90vh]"},yt={class:"px-6 py-4 border-b border-white/10 flex justify-between items-center bg-black/20"},_t={class:"text-lg font-bold text-white"},kt={class:"p-6 overflow-y-auto space-y-6 scrollbar-thin scrollbar-thumb-white/10"},Ct={class:"space-y-4"},$t=["disabled"],St={key:0,class:"text-[10px] text-white/30 mt-1"},It={class:"grid grid-cols-2 gap-4"},Et={class:"space-y-4"},Dt=["value"],Vt={class:"flex items-center gap-2 pt-2"},Tt={class:"p-4 border-t border-white/10 bg-black/20 flex justify-end gap-3"},Lt=["disabled"],At={key:0,class:"fa-solid fa-spinner fa-spin"},Nt={__name:"ContactoForm",props:{show:Boolean,clienteId:{type:String,required:!0},contacto:{type:Object,default:null}},emits:["close","saved"],setup(k,{emit:E}){const w=k,u=E,p=ce(),f=ze(),D=pe(),b=be(),r=L(()=>p.tiposContacto),d=h(!1),x=h({persona:{id:null,nombre_completo:"",celular_personal:"",email_personal:""},vinculo:{id:null,tipo_contacto_id:null,email_laboral:"",telefono_escritorio:"",es_principal:!1}}),N=L(()=>!!w.contacto);xe(()=>{p.fetchTiposContacto()}),ve(()=>w.show,c=>{c&&(_(),w.contacto&&S(w.contacto))});const _=()=>{x.value={persona:{id:null,nombre_completo:"",celular_personal:"",email_personal:""},vinculo:{id:null,tipo_contacto_id:null,email_laboral:"",telefono_escritorio:"",es_principal:!1}}},S=c=>{x.value.vinculo={id:c.id,tipo_contacto_id:c.tipo_contacto_id,email_laboral:c.email_laboral,telefono_escritorio:c.telefono_escritorio,es_principal:c.es_principal},c.persona&&(x.value.persona={id:c.persona.id,nombre_completo:c.persona.nombre_completo,celular_personal:c.persona.celular_personal,email_personal:c.persona.email_personal})},s=async()=>{if(!x.value.persona.nombre_completo&&!N.value){b.add("El nombre es obligatorio","error");return}if(!x.value.vinculo.tipo_contacto_id){b.add("El rol es obligatorio","error");return}d.value=!0;try{let c=x.value.persona.id;N.value?await f.updatePersona(c,x.value.persona):c=(await f.createPersona(x.value.persona)).id;const a={...x.value.vinculo,cliente_id:w.clienteId,persona_id:c};N.value?(await D.updateVinculo(w.clienteId,x.value.vinculo.id,a),b.add("Contacto actualizado","success")):(await D.createVinculo(w.clienteId,a),b.add("Contacto creado","success")),u("saved"),u("close")}catch(c){console.error(c),b.add("Error al guardar contacto","error")}finally{d.value=!1}};return(c,a)=>k.show?(n(),i("div",ht,[e("div",gt,[e("div",yt,[e("h3",_t,v(N.value?"Editar Contacto":"Nuevo Contacto"),1),e("button",{onClick:a[0]||(a[0]=m=>c.$emit("close")),class:"text-white/50 hover:text-white transition-colors"},[...a[9]||(a[9]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)])])]),e("div",kt,[e("div",Ct,[a[13]||(a[13]=e("h4",{class:"text-xs font-bold uppercase text-cyan-400 border-b border-cyan-500/30 pb-1 mb-2"},"Datos Personales",-1)),e("div",null,[a[10]||(a[10]=e("label",{class:"block text-xs font-bold uppercase text-white/40 mb-1"},"Nombre Completo *",-1)),y(e("input",{"onUpdate:modelValue":a[1]||(a[1]=m=>x.value.persona.nombre_completo=m),type:"text",class:"w-full bg-black/20 border border-white/10 rounded p-2 text-white focus:border-cyan-400 outline-none transition-colors",placeholder:"Juan P√©rez",disabled:N.value},null,8,$t),[[$,x.value.persona.nombre_completo]]),N.value?(n(),i("p",St,"El nombre de la persona no se edita desde aqu√≠.")):g("",!0)]),e("div",It,[e("div",null,[a[11]||(a[11]=e("label",{class:"block text-xs font-bold uppercase text-white/40 mb-1"},"Celular Personal",-1)),y(e("input",{"onUpdate:modelValue":a[2]||(a[2]=m=>x.value.persona.celular_personal=m),type:"text",class:"w-full bg-black/20 border border-white/10 rounded p-2 text-white focus:border-cyan-400 outline-none transition-colors",placeholder:"+54 9..."},null,512),[[$,x.value.persona.celular_personal]])]),e("div",null,[a[12]||(a[12]=e("label",{class:"block text-xs font-bold uppercase text-white/40 mb-1"},"Email Personal",-1)),y(e("input",{"onUpdate:modelValue":a[3]||(a[3]=m=>x.value.persona.email_personal=m),type:"email",class:"w-full bg-black/20 border border-white/10 rounded p-2 text-white focus:border-cyan-400 outline-none transition-colors",placeholder:"personal@gmail.com"},null,512),[[$,x.value.persona.email_personal]])])])]),e("div",Et,[a[19]||(a[19]=e("h4",{class:"text-xs font-bold uppercase text-cyan-400 border-b border-cyan-500/30 pb-1 mb-2"},"Datos Laborales",-1)),e("div",null,[a[15]||(a[15]=e("label",{class:"block text-xs font-bold uppercase text-white/40 mb-1"},"Rol / Tipo *",-1)),y(e("select",{"onUpdate:modelValue":a[4]||(a[4]=m=>x.value.vinculo.tipo_contacto_id=m),class:"w-full bg-black/20 border border-white/10 rounded p-2 text-white focus:border-cyan-400 outline-none appearance-none [&>option]:bg-slate-900"},[a[14]||(a[14]=e("option",{value:null},"Seleccionar Rol...",-1)),(n(!0),i(T,null,U(r.value,m=>(n(),i("option",{key:m.id,value:m.id},v(m.nombre),9,Dt))),128))],512),[[K,x.value.vinculo.tipo_contacto_id]])]),e("div",null,[a[16]||(a[16]=e("label",{class:"block text-xs font-bold uppercase text-white/40 mb-1"},"Email Laboral",-1)),y(e("input",{"onUpdate:modelValue":a[5]||(a[5]=m=>x.value.vinculo.email_laboral=m),type:"email",class:"w-full bg-black/20 border border-white/10 rounded p-2 text-white focus:border-cyan-400 outline-none transition-colors",placeholder:"trabajo@empresa.com"},null,512),[[$,x.value.vinculo.email_laboral]])]),e("div",null,[a[17]||(a[17]=e("label",{class:"block text-xs font-bold uppercase text-white/40 mb-1"},"Tel√©fono Escritorio",-1)),y(e("input",{"onUpdate:modelValue":a[6]||(a[6]=m=>x.value.vinculo.telefono_escritorio=m),type:"text",class:"w-full bg-black/20 border border-white/10 rounded p-2 text-white focus:border-cyan-400 outline-none transition-colors",placeholder:"Interno 123..."},null,512),[[$,x.value.vinculo.telefono_escritorio]])]),e("div",Vt,[y(e("input",{type:"checkbox","onUpdate:modelValue":a[7]||(a[7]=m=>x.value.vinculo.es_principal=m),id:"principalCheck",class:"accent-cyan-500 h-4 w-4"},null,512),[[Ee,x.value.vinculo.es_principal]]),a[18]||(a[18]=e("label",{for:"principalCheck",class:"text-sm text-white cursor-pointer select-none"},"Contacto Principal",-1))])])]),e("div",Tt,[e("button",{onClick:a[8]||(a[8]=m=>c.$emit("close")),class:"px-4 py-2 text-white/50 hover:text-white transition-colors text-sm font-bold"},"Cancelar"),e("button",{onClick:s,class:"px-6 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg font-bold shadow-lg shadow-cyan-900/20 transition-all flex items-center gap-2",disabled:d.value},[d.value?(n(),i("i",At)):g("",!0),e("span",null,v(d.value?"Guardando...":"Guardar"),1)],8,Lt)])])])):g("",!0)}};function Ot(){const k={VERDE:{code:"VERDE",color:"text-green-400",bg:"bg-green-500/10",icon:"fa-check-circle",label:"Auditado"},ROJO:{code:"ROJO",color:"text-red-400",bg:"bg-red-500/10",icon:"fa-exclamation-triangle",label:"Incompleto"},KILL:{code:"KILL",color:"text-gray-500",bg:"bg-gray-500/10",icon:"fa-trash",label:"Basura"}};return{STATUS:k,evaluateCliente:u=>{if(!u)return{...k.KILL,reasons:["Cliente vac√≠o"]};if(u.deleted_at)return{...k.KILL,reasons:["Eliminado (Soft Delete)"]};const p=[];(!u.cuit||u.cuit.length<11)&&p.push("Falta CUIT v√°lido"),u.condicion_iva_id||p.push("Falta Condici√≥n IVA"),u.segmento_id||p.push("Falta Segmento");const f=u.domicilios&&u.domicilios.some(b=>b.es_fiscal&&b.activo);return!(u.domicilio_fiscal_resumen&&u.domicilio_fiscal_resumen.length>5)&&!f&&p.push("Falta Domicilio Fiscal"),p.length>0?{...k.ROJO,reasons:p}:{...k.VERDE,reasons:[]}},evaluateProducto:u=>{if(!u)return{...k.KILL,reasons:["Producto vac√≠o"]};if(u.deleted_at)return{...k.KILL,reasons:["Eliminado"]};const p=[];return u.rubro_id||p.push("Falta Rubro"),(u.precio_costo===null||u.precio_costo===void 0)&&p.push("Sin Costo"),u.activo||p.push("Inactivo"),p.length>0?{...k.ROJO,reasons:p}:{...k.VERDE,reasons:[]}}}}const Ut={class:"flex h-full w-full bg-[var(--hawe-bg-panel)] text-white overflow-hidden font-sans"},Rt={class:"w-80 flex flex-col border-r border-white/10 bg-black/20 backdrop-blur-md z-20"},jt={class:"h-14 flex items-center justify-between px-6 border-b border-white/10 shrink-0"},zt={class:"flex items-center gap-4"},Ft={class:"flex-1 overflow-y-auto p-6 space-y-6 scrollbar-thin scrollbar-thumb-white/10"},Pt={class:"text-center"},Mt={class:"mt-4 space-y-2"},Bt={class:"space-y-3"},Gt={key:0,class:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 animate-pulse"},Kt={class:"list-disc list-inside text-[10px] text-red-300/80 font-mono"},Ht={class:"bg-white/5 rounded-lg p-3 border border-white/5"},qt={class:"bg-white/5 rounded-lg p-3 border border-white/5"},Jt={class:"w-full"},Wt=["value"],Xt={class:"w-full flex gap-2"},Yt=["value"],Qt={class:"space-y-4 pt-4 border-t border-white/10"},Zt={class:"space-y-2"},eo={class:"flex items-center bg-white/5 rounded-lg px-3 py-2 border border-white/5"},to={class:"space-y-2"},oo={class:"flex-1 flex flex-col relative bg-gradient-to-br from-[#0f344e] to-[#0a1f2e]"},lo={class:"h-32 px-8 py-6 flex items-start justify-between border-b border-white/5 bg-white/5"},so={class:"flex-1 mr-8"},no={key:0,class:"space-y-4"},io={class:"bg-white/5 p-4 rounded-xl border border-white/10 shadow-lg backdrop-blur-sm"},ao={key:1},ro={class:"font-outfit text-2xl font-bold text-white mb-1"},uo={class:"flex items-center gap-4"},co={class:"flex items-center gap-2 bg-black/20 px-2 py-1 rounded-full border border-white/10"},po={class:"text-white/50 text-xs"},bo={key:0,class:"flex gap-4"},xo={class:"bg-black/20 rounded-lg p-3 border border-white/5 min-w-[120px]"},vo={class:"text-lg font-mono text-white font-bold"},fo={class:"bg-black/20 rounded-lg p-3 border border-white/5 min-w-[120px]"},mo={class:"text-lg text-white/70"},wo={key:1,class:"flex items-start"},ho={class:"flex-1 overflow-y-auto p-8"},go={key:0,class:"max-w-3xl space-y-8"},yo={class:"grid grid-cols-2 gap-6"},_o={class:"bg-white/5 p-6 rounded-xl border border-white/10"},ko={class:"space-y-4"},Co={class:"text-[10px] text-white/30 mt-1 text-right"},$o={class:"flex gap-2"},So=["value"],Io={key:1},Eo={class:"space-y-6 max-w-3xl"},Do={class:"bg-white/5 border border-white/10 rounded-xl p-4"},Vo={class:"h-16 bg-[#081824] border-t border-white/10 px-6 flex items-center justify-end shrink-0 z-30"},To={class:"flex items-center gap-3"},Lo={class:"w-80 flex flex-col border-l border-white/10 bg-black/20 backdrop-blur-md z-20"},Ao={class:"flex-1 overflow-y-auto p-4 space-y-6 scrollbar-thin scrollbar-thumb-white/10"},No={class:"flex items-center justify-between mb-3"},Oo={class:"space-y-2"},Uo=["onClick","onDblclick","onContextmenu"],Ro={class:"flex justify-between items-start mb-1"},jo={key:0,class:"text-[10px] bg-purple-500/20 text-purple-300 px-1.5 rounded border border-purple-500/30"},zo={key:1,class:"text-[10px] bg-gray-700 text-gray-300 px-1.5 rounded"},Fo=["onClick"],Po={class:"text-sm font-medium text-white leading-tight"},Mo={class:"text-xs text-white/50"},Bo={class:"mt-2 flex items-center gap-2 text-xs text-white/40"},Go={class:"space-y-2"},Ko={class:"flex items-center gap-3"},Ho={class:"h-8 w-8 rounded-full bg-gradient-to-br from-pink-500 to-orange-400 flex items-center justify-center text-xs font-bold text-white shrink-0"},qo={class:"flex-1 min-w-0"},Jo={class:"flex justify-between"},Wo={class:"text-sm font-bold text-white truncate"},Xo=["onClick"],Yo={class:"text-[10px] text-white/50 uppercase truncate"},Qo={key:0,class:"text-center py-4 border border-dashed border-white/10 rounded-lg"},Zo={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm"},el={class:"bg-[#0a253a] border border-white/10 rounded-xl p-6 w-96 shadow-2xl"},tl={class:"flex justify-end gap-3"},ol={key:3,class:"fixed inset-0 z-[60] bg-black/80 backdrop-blur-sm flex items-center justify-center p-8"},ll={class:"bg-[#0a253a] border border-white/10 rounded-xl w-full h-full shadow-2xl overflow-hidden"},il={__name:"ClientCanvas",setup(k){const E=De(),w=Le(),u=pe(),p=ce(),f=be(),{evaluateCliente:D}=Ot(),b=L(()=>{const l={...s.value,domicilios:c.value,domicilio_fiscal_resumen:null};return D(l)}),r=L(()=>E.query.returnUrl),d=()=>w.push("/hawe"),x=()=>{console.log("DEBUG: Volviendo a",r.value),r.value?w.push(r.value):w.push("/hawe")},N=()=>w.push({name:"HaweClientCanvas",params:{id:"new"}}),_=h(!1),S=h("CLIENTE"),s=h({id:null,razon_social:"",cuit:"",condicion_iva_id:null,lista_precios_id:null,vendedor_id:null,segmento_id:null,limite_credito:0,dias_vencimiento:30,activo:!0,observaciones:"",web_portal_pagos:"",datos_acceso_pagos:"",saldo:0,fecha_ultima_compra:null,codigo_interno:""}),c=h([]),a=h([]),m=h(!1),P=h(""),H=h(!1),j=h(!1),q=h(null),J=h(null),z=h(null),F=h(!1),W=h(!1),M=h(!1),X=h(null),C=Ve({show:!1,x:0,y:0,actions:[]});L(()=>p.listasPrecios),L(()=>p.vendedores);const le=L(()=>p.segmentos),fe=L(()=>p.condicionesIva),se=l=>{if(l.key==="Escape"){if(S.value!=="CLIENTE"){S.value="CLIENTE";return}w.push("/hawe")}if(l.key==="F10"){if(l.preventDefault(),S.value==="DOMICILIO")return;Z()}if(!_.value&&S.value==="CLIENTE"){if(c.value.length>0&&z.value){const t=c.value.findIndex(o=>o.id===z.value);if(l.key==="ArrowUp"){l.preventDefault();const o=t>0?t-1:c.value.length-1;ee(c.value[o]);return}if(l.key==="ArrowDown"){l.preventDefault();const o=t<c.value.length-1?t+1:0;ee(c.value[o]);return}if(l.key==="Enter"||l.key===" "){l.preventDefault(),O(c.value[t]);return}}u.clientes.length>0&&(l.key==="ArrowLeft"&&B(-1),l.key==="ArrowRight"&&B(1),l.key==="Home"&&(l.preventDefault(),Y(0)),l.key==="End"&&(l.preventDefault(),Y(u.clientes.length-1)),l.key==="PageUp"&&(l.preventDefault(),B(-10)),l.key==="PageDown"&&(l.preventDefault(),B(10)))}},Y=l=>{if(l>=0&&l<u.clientes.length){const t=u.clientes[l];w.push({name:"HaweClientCanvas",params:{id:t.id}})}},B=l=>{const t=u.clientes.findIndex(V=>V.id==s.value.id);if(t===-1)return;let o=t+l;Math.abs(l)===1?(o<0&&(o=u.clientes.length-1),o>=u.clientes.length&&(o=0)):(o<0&&(o=0),o>=u.clientes.length&&(o=u.clientes.length-1)),Y(o)};xe(async()=>{window.addEventListener("keydown",se),await p.fetchAll(),u.clientes.length===0&&await u.fetchClientes(),E.params.id==="new"?(_.value=!0,ne(),E.query.search&&(s.value.razon_social=E.query.search)):(_.value=!1,await Q(E.params.id))}),ve(()=>E.params.id,async l=>{l==="new"?(_.value=!0,ne()):l&&(_.value=!1,await Q(l))}),Te(()=>{window.removeEventListener("keydown",se)});const ne=()=>{s.value={id:null,razon_social:"",cuit:"",condicion_iva:"Responsable Inscripto",lista_precios_id:null,vendedor_id:null,segmento_id:null,limite_credito:0,dias_vencimiento:30,activo:!0,observaciones:"",web_portal_pagos:"",datos_acceso_pagos:"",saldo:0,fecha_ultima_compra:null,codigo_interno:""},c.value=[],a.value=[]},Q=async l=>{try{const t=await u.fetchClienteById(l);t&&(s.value={...t},c.value=t.domicilios||[],a.value=t.vinculos||[])}catch(t){f.add("Error al cargar cliente","error"),console.error(t)}},Z=async()=>{try{const l={...s.value,domicilios:c.value,vinculos:a.value};_.value?(await u.createCliente(l),f.add("Cliente creado exitosamente","success")):(await u.updateCliente(s.value.id,l),f.add("Cliente actualizado exitosamente","success")),r.value?w.push(r.value):w.push("/hawe")}catch(l){f.add("Error al guardar cliente","error"),console.error(l)}},me=async()=>{if(confirm("¬øEst√° seguro de dar de baja este cliente?"))try{await u.deleteCliente(s.value.id),f.add("Cliente dado de baja","success"),w.push("/hawe")}catch{f.add("Error al dar de baja","error")}},we=async()=>{try{s.value.activo=!0,await Z()}catch{f.add("Error al reactivar cliente","error"),s.value.activo=!1}},he=()=>{s.value.id=null,s.value.razon_social+=" (Copia)",s.value.codigo_interno="",_.value=!0,w.push({name:"HaweClientCanvas",params:{id:"new"}}),f.add("Cliente clonado. Edite y guarde.","info")},ge=()=>{if(_.value){f.add("Guarde el cliente antes de agregar contactos","warning");return}X.value=null,M.value=!0},ye=l=>{X.value=l,M.value=!0},_e=async()=>{await Q(s.value.id)},ie=async()=>{if(P.value)try{if(p.createSegmento){const l=await p.createSegmento({nombre:P.value});s.value.segmento_id=l.id,f.add("Segmento creado","success")}else f.add("Funci√≥n crear segmento no implementada en store","warning");m.value=!1,P.value=""}catch(l){console.error(l),f.add("Error al crear segmento","error")}},ke=()=>{s.value.segmento_id==="__NEW__"&&(s.value.segmento_id=null,m.value=!0)},ae=l=>{s.value.cuit=l.target.value.replace(/[^0-9]/g,"")},Ce=(l=null)=>{q.value=l?l.id:null,H.value=!0},$e=()=>{H.value=!1,q.value=null},Se=async()=>{await p.fetchSegmentos(null,!0)},re=l=>{C.show=!0,C.x=l.clientX,C.y=l.clientY,C.actions=[{label:"Nuevo Segmento",icon:"‚ûï",handler:()=>Ce()},{label:"Administrar Segmentos",icon:"üìã",handler:()=>{j.value=!0}}]},O=(l=null)=>{J.value=l,S.value="DOMICILIO"},Ie=async l=>{try{let t;if(l.id?(t=await u.updateDomicilio(s.value.id,l.id,l),f.add("Domicilio actualizado","success")):(t=await u.createDomicilio(s.value.id,l),f.add("Domicilio creado","success")),t.activo||(t.activo=!0),l.id){const o=c.value.findIndex(V=>V.id===l.id);o!==-1&&(c.value[o]=t)}else c.value.push(t);await u.fetchClientes()}catch(t){console.error(t),f.add("Error al guardar domicilio","error")}S.value="CLIENTE"},ee=l=>{z.value=l.id},de=(l,t=null)=>{C.show=!0,C.x=l.clientX,C.y=l.clientY,t?C.actions=[{label:"Editar Domicilio",icon:"‚úèÔ∏è",handler:()=>O(t)},{label:"Eliminar",icon:"üóëÔ∏è",handler:()=>ue(t)}]:C.actions=[{label:"Nuevo Domicilio",icon:"‚ûï",handler:()=>O()},{label:"Administrar Domicilios",icon:"üìã",handler:()=>{F.value=!0}}]},ue=async l=>{if(confirm("¬øEst√° seguro de eliminar este domicilio?")){try{await u.deleteDomicilio(s.value.id,l.id),c.value=c.value.filter(t=>t.id!==l.id),f.add("Domicilio eliminado","success")}catch(t){console.error(t),f.add("Error al eliminar domicilio","error")}z.value===l.id&&(z.value=null,J.value=null)}};return(l,t)=>(n(),i("div",Ut,[e("aside",Rt,[e("div",jt,[e("div",zt,[r.value?(n(),i("button",{key:0,onClick:x,class:"flex items-center gap-2 text-white hover:text-green-400 transition-colors group px-3 py-1.5 rounded bg-green-900/20 border border-green-500/30",title:"Volver a la operaci√≥n anterior"},[...t[34]||(t[34]=[e("i",{class:"fa-solid fa-arrow-left text-green-400"},null,-1),e("span",{class:"font-outfit text-sm font-bold uppercase tracking-wider text-green-400"},"Volver al Pedido",-1)])])):(n(),i("button",{key:1,onClick:d,class:"flex items-center gap-2 text-white hover:text-cyan-400 transition-colors group",title:"Ir al Listado de Clientes"},[...t[35]||(t[35]=[e("i",{class:"fa-solid fa-list text-cyan-400"},null,-1),e("span",{class:"font-outfit text-sm font-bold uppercase tracking-wider text-cyan-400"},"Fichas",-1)])]))]),_.value?g("",!0):(n(),i("button",{key:0,onClick:N,class:"flex items-center gap-2 text-white/50 hover:text-white px-3 py-1.5 rounded-md hover:bg-white/5 transition-all group border border-transparent hover:border-white/10"},[...t[36]||(t[36]=[e("i",{class:"fa-solid fa-plus text-xs"},null,-1),e("span",{class:"font-outfit text-xs font-bold uppercase tracking-wider"},"Nuevo Cliente",-1)])]))]),e("div",Ft,[e("div",Pt,[t[37]||(t[37]=e("div",{class:"relative group cursor-pointer inline-block"},[e("div",{class:"h-20 w-20 rounded-full bg-white/10 flex items-center justify-center text-3xl text-cyan-400 border-2 border-white/20 group-hover:border-cyan-400 transition-colors mx-auto"},[e("i",{class:"fa-solid fa-building"})])],-1)),e("div",Mt,[y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.value.razon_social=o),type:"text",class:"w-full bg-transparent text-center font-outfit text-xl font-bold text-white focus:outline-none border-b border-transparent focus:border-cyan-400 placeholder-white/30",placeholder:"Raz√≥n Social"},null,512),[[$,s.value.razon_social]]),y(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.value.nombre_fantasia=o),type:"text",class:"w-full bg-transparent text-center text-sm text-white/70 focus:outline-none border-b border-transparent focus:border-cyan-400 placeholder-white/20",placeholder:"Nombre Fantas√≠a (Opcional)"},null,512),[[$,s.value.nombre_fantasia]])])]),e("div",Bt,[b.value.code!=="VERDE"?(n(),i("div",Gt,[t[38]||(t[38]=e("div",{class:"flex items-center gap-2 mb-2"},[e("i",{class:"fa-solid fa-triangle-exclamation text-red-400"}),e("span",{class:"text-xs font-bold text-red-400 uppercase"},"Ficha Incompleta")],-1)),e("ul",Kt,[(n(!0),i(T,null,U(b.value.reasons,o=>(n(),i("li",{key:o},v(o),1))),128))])])):g("",!0),e("div",Ht,[t[39]||(t[39]=e("label",{class:"block text-[10px] font-bold uppercase text-white/40 mb-1"},"CUIT",-1)),y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.cuit=o),onInput:ae,type:"text",class:"w-full bg-transparent text-sm font-mono text-white focus:outline-none",placeholder:"00000000000",maxlength:"11"},null,544),[[$,s.value.cuit]])]),e("div",qt,[t[41]||(t[41]=e("label",{class:"block text-[10px] font-bold uppercase text-white/40 mb-1"},"CONDICI√ìN IVA",-1)),e("div",Jt,[y(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.value.condicion_iva_id=o),class:"w-full bg-transparent text-sm text-white focus:outline-none appearance-none [&>option]:bg-slate-900 border-b border-white/10 focus:border-cyan-400 pb-1"},[t[40]||(t[40]=e("option",{value:null},"Seleccionar...",-1)),(n(!0),i(T,null,U(fe.value,o=>(n(),i("option",{key:o.id,value:o.id},v(o.nombre),9,Wt))),128))],512),[[K,s.value.condicion_iva_id]])])]),e("div",{class:"bg-white/5 rounded-lg p-3 border border-white/5",onDblclick:t[7]||(t[7]=o=>j.value=!0),title:"Doble click para administrar"},[e("label",{class:"block text-[10px] font-bold uppercase text-white/40 mb-1 cursor-pointer hover:text-white/80 select-none",onContextmenu:t[4]||(t[4]=R(o=>re(o),["prevent"]))}," SEGMENTOS ",32),e("div",Xt,[y(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.value.segmento_id=o),onChange:ke,class:"flex-1 bg-transparent text-sm text-white focus:outline-none appearance-none [&>option]:bg-slate-900 border-b border-white/10 focus:border-cyan-400 pb-1"},[t[42]||(t[42]=e("option",{value:null},"Sin Segmento",-1)),t[43]||(t[43]=e("option",{value:"__NEW__",class:"text-green-400 font-bold"},"+ Crear Nuevo Segmento",-1)),t[44]||(t[44]=e("option",{disabled:""},"----------------",-1)),(n(!0),i(T,null,U(le.value,o=>(n(),i("option",{key:o.id,value:o.id},v(o.nombre),9,Yt))),128))],544),[[K,s.value.segmento_id]]),e("button",{onClick:t[6]||(t[6]=o=>j.value=!0),class:"text-white/30 hover:text-cyan-400 transition-colors px-1",title:"Administrar Segmentos"},[...t[45]||(t[45]=[e("i",{class:"fa-solid fa-cog"},null,-1)])])])],32)]),e("div",Qt,[t[49]||(t[49]=e("h3",{class:"text-xs font-bold uppercase text-white/50"},"Administraci√≥n",-1)),e("div",Zt,[t[47]||(t[47]=e("label",{class:"text-xs text-white/70"},"Portal de Pagos",-1)),e("div",eo,[t[46]||(t[46]=e("i",{class:"fa-solid fa-globe w-4 text-white/30"},null,-1)),y(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.value.web_portal_pagos=o),type:"text",class:"flex-1 bg-transparent text-xs text-white focus:outline-none ml-2",placeholder:"https://..."},null,512),[[$,s.value.web_portal_pagos]])])]),e("div",to,[t[48]||(t[48]=e("label",{class:"text-xs text-white/70"},"Datos Acceso",-1)),y(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.value.datos_acceso_pagos=o),rows:"2",class:"w-full bg-white/5 rounded-lg px-3 py-2 border border-white/5 text-xs text-white focus:outline-none resize-none",placeholder:"Usuario / Clave..."},null,512),[[$,s.value.datos_acceso_pagos]])])])])]),e("main",oo,[S.value==="CLIENTE"?(n(),i(T,{key:0},[e("header",lo,[e("div",so,[_.value?(n(),i("div",no,[t[51]||(t[51]=e("h1",{class:"font-outfit text-2xl font-bold text-white/50 mb-1 uppercase"},"Alta de Cliente",-1)),e("div",io,[t[50]||(t[50]=e("label",{class:"block text-xs font-bold uppercase text-cyan-400 mb-1"},[I("Raz√≥n Social "),e("span",{class:"text-red-400"},"*")],-1)),y(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.value.razon_social=o),type:"text",class:"w-full bg-transparent text-2xl font-bold text-white focus:outline-none placeholder-white/20 border-b border-white/10 focus:border-cyan-400 transition-colors",placeholder:"Ingrese el nombre del cliente...",autofocus:""},null,512),[[$,s.value.razon_social]])])])):(n(),i("div",ao,[e("h1",ro,v(s.value.razon_social),1),e("div",uo,[e("div",co,[e("span",{class:A(["text-[10px] font-bold uppercase",s.value.activo?"text-green-400":"text-red-400"])},v(s.value.activo?"OPERATIVO":"INACTIVO"),3),e("button",{onClick:t[11]||(t[11]=o=>s.value.activo=!s.value.activo),class:A(["relative inline-flex h-4 w-8 items-center rounded-full transition-colors focus:outline-none",s.value.activo?"bg-green-500/50":"bg-red-500/50"]),title:"Click para cambiar estado"},[e("span",{class:A(["inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform shadow-sm",s.value.activo?"translate-x-4":"translate-x-1"])},null,2)],2)]),t[52]||(t[52]=e("span",{class:"text-white/30 text-xs"},"‚Ä¢",-1)),e("span",po,"C√≥d: "+v(s.value.codigo_interno||"---"),1)])]))]),_.value?(n(),i("div",wo)):(n(),i("div",bo,[e("div",xo,[t[53]||(t[53]=e("p",{class:"text-[10px] uppercase text-white/40 font-bold"},"Saldo Actual",-1)),e("p",vo,"$ "+v(s.value.saldo?Number(s.value.saldo).toFixed(2):"0.00"),1)]),e("div",fo,[t[54]||(t[54]=e("p",{class:"text-[10px] uppercase text-white/40 font-bold"},"√öltima Compra",-1)),e("p",mo,v(s.value.fecha_ultima_compra?new Date(s.value.fecha_ultima_compra).toLocaleDateString():"--/--/--"),1)]),t[55]||(t[55]=oe('<div class="relative group"><button class="bg-cyan-900/20 rounded-lg p-3 border border-cyan-500/30 min-w-[120px] text-left hover:bg-cyan-900/40 transition-colors w-full"><p class="text-[10px] uppercase text-cyan-400 font-bold flex justify-between"> Pendientes <i class="fa-solid fa-chevron-down"></i></p><p class="text-lg text-cyan-300 font-bold">0</p></button><div class="absolute right-0 mt-2 w-64 bg-[#0a253a] border border-cyan-500/30 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50 p-2"><p class="text-xs text-white/50 uppercase font-bold mb-2 px-2">En curso</p><div class="space-y-1"><div class="px-2 py-1.5 hover:bg-white/5 rounded text-sm text-white/70 flex justify-between"><span>Cotizaciones</span><span class="font-bold text-white">0</span></div><div class="px-2 py-1.5 hover:bg-white/5 rounded text-sm text-white/70 flex justify-between"><span>Pedidos Abiertos</span><span class="font-bold text-white">0</span></div><div class="px-2 py-1.5 hover:bg-white/5 rounded text-sm text-white/70 flex justify-between"><span>Remitos s/Facturar</span><span class="font-bold text-white">0</span></div></div></div></div>',1))]))]),e("div",ho,[_.value?(n(),i("div",go,[e("div",yo,[e("div",_o,[t[59]||(t[59]=e("h3",{class:"text-sm font-bold text-white/90 mb-4 uppercase border-b border-white/10 pb-2"},"Datos Obligatorios",-1)),e("div",ko,[e("div",null,[t[56]||(t[56]=e("label",{class:"block text-xs font-bold uppercase text-white/40 mb-1"},[I("CUIT "),e("span",{class:"text-red-400"},"*")],-1)),y(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.value.cuit=o),onInput:ae,type:"text",class:"w-full bg-black/20 text-lg font-mono text-white focus:outline-none p-2 rounded border border-white/10 focus:border-cyan-400",placeholder:"00000000000",maxlength:"11"},null,544),[[$,s.value.cuit]]),e("p",Co,v(s.value.cuit?s.value.cuit.length:0)+"/11",1)]),e("div",null,[e("label",{class:"block text-xs font-bold uppercase text-white/40 mb-1 cursor-pointer hover:text-white/80 select-none",onContextmenu:t[13]||(t[13]=R(o=>re(o),["prevent"])),onDblclick:t[14]||(t[14]=o=>j.value=!0),title:"Doble click para administrar"}," Segmento ",32),e("div",$o,[y(e("select",{"onUpdate:modelValue":t[15]||(t[15]=o=>s.value.segmento_id=o),class:"flex-1 bg-black/20 text-sm text-white focus:outline-none p-2 rounded border border-white/10 focus:border-cyan-400 appearance-none [&>option]:bg-slate-900"},[t[57]||(t[57]=e("option",{value:null},"Seleccionar Segmento...",-1)),(n(!0),i(T,null,U(le.value,o=>(n(),i("option",{key:o.id,value:o.id},v(o.nombre),9,So))),128))],512),[[K,s.value.segmento_id]]),e("button",{onClick:t[16]||(t[16]=o=>m.value=!0),class:"px-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded text-cyan-400 hover:text-cyan-300 transition-colors",title:"Nuevo Segmento"},[...t[58]||(t[58]=[e("i",{class:"fa-solid fa-plus"},null,-1)])])])])])]),t[60]||(t[60]=oe('<div class="bg-white/5 p-6 rounded-xl border border-white/10 opacity-50"><h3 class="text-sm font-bold text-white/90 mb-4 uppercase border-b border-white/10 pb-2">Pr√≥ximos Pasos</h3><ul class="space-y-2 text-sm text-white/60"><li><i class="fa-solid fa-circle-check text-white/20 mr-2"></i>Guardar Datos B√°sicos</li><li><i class="fa-solid fa-circle text-white/20 mr-2"></i>Cargar Domicilios</li><li><i class="fa-solid fa-circle text-white/20 mr-2"></i>Cargar Contactos</li></ul><p class="mt-4 text-xs text-cyan-400">Guarde el cliente para habilitar la carga de domicilios y contactos.</p></div>',1))])])):(n(),i("div",Io,[t[63]||(t[63]=e("div",{class:"flex border-b border-white/10 mb-6"},[e("button",{class:"px-4 py-2 text-sm font-bold text-cyan-400 border-b-2 border-cyan-400"},"Bit√°cora & Notas"),e("button",{class:"px-4 py-2 text-sm font-medium text-white/50 hover:text-white transition-colors"},"Historial Compras"),e("button",{class:"px-4 py-2 text-sm font-medium text-white/50 hover:text-white transition-colors"},"Productos Habituales")],-1)),e("div",Eo,[e("div",Do,[t[61]||(t[61]=e("div",{class:"flex justify-between items-center mb-2"},[e("h3",{class:"text-sm font-bold text-white/90"},[e("i",{class:"fa-solid fa-note-sticky mr-2 text-yellow-400"}),I("Notas Internas")]),e("span",{class:"text-xs text-white/30"},"Visible solo para administraci√≥n")],-1)),y(e("textarea",{"onUpdate:modelValue":t[17]||(t[17]=o=>s.value.observaciones=o),class:"w-full h-32 bg-black/20 border border-white/10 rounded-lg p-3 text-sm text-white focus:outline-none focus:border-cyan-400 transition-all placeholder-white/20 resize-none",placeholder:"Escribe recordatorios, preferencias de entrega, o detalles importantes..."},null,512),[[$,s.value.observaciones]])]),t[62]||(t[62]=oe('<div class="opacity-50 pointer-events-none"><h4 class="text-xs font-bold uppercase text-white/30 mb-2">Actividad Reciente (Pr√≥ximamente)</h4><div class="space-y-2"><div class="flex items-center gap-3 p-3 rounded-lg bg-white/5 border border-white/5"><div class="h-8 w-8 rounded-full bg-green-500/20 flex items-center justify-center text-green-400"><i class="fa-solid fa-check"></i></div><div><p class="text-sm text-white">Pedido #1234 Entregado</p><p class="text-xs text-white/40">Hace 2 d√≠as</p></div></div></div></div>',1))])]))]),e("footer",Vo,[e("div",To,[t[66]||(t[66]=e("span",{class:"text-xs text-white/30 mr-4 font-mono hidden sm:inline-block"},[e("span",{class:"mr-3"},"ESC = Volver"),e("span",null,"F10 = Guardar")],-1)),_.value?g("",!0):(n(),i("button",{key:0,onClick:he,class:"px-4 py-2 rounded-lg text-white/50 hover:text-white hover:bg-white/10 text-sm font-medium transition-colors",title:"Crear nuevo basado en este"},[...t[64]||(t[64]=[e("i",{class:"fa-solid fa-copy mr-2"},null,-1),I("Clonar ",-1)])])),!_.value&&s.value.activo?(n(),i("button",{key:1,onClick:me,class:"px-4 py-2 rounded-lg text-red-400 hover:bg-red-900/20 hover:text-red-300 text-sm font-medium transition-colors"}," Dar de Baja ")):g("",!0),!_.value&&!s.value.activo?(n(),i("button",{key:2,onClick:we,class:"px-4 py-2 rounded-lg text-green-400 hover:bg-green-900/20 hover:text-green-300 text-sm font-medium transition-colors"}," Activar ")):g("",!0),e("button",{onClick:Z,class:"px-6 py-2 rounded-lg bg-emerald-700 hover:bg-emerald-600 text-white text-sm font-bold shadow-lg shadow-emerald-900/50 transition-all transform active:scale-95 flex items-center gap-2"},[...t[65]||(t[65]=[I(" Guardar Cambios ",-1),e("span",{class:"font-mono opacity-80"},"F10",-1)])])])])],64)):g("",!0),S.value==="DOMICILIO"?(n(),G(Ae,{key:1,show:!0,domicilio:J.value,defaultTransportId:s.value.domicilios?.find(o=>o.es_fiscal)?.transporte_id,onClose:t[18]||(t[18]=o=>S.value="CLIENTE"),onSaved:Ie},null,8,["domicilio","defaultTransportId"])):g("",!0)]),e("aside",Lo,[e("div",Ao,[e("section",null,[e("div",No,[e("h3",{class:"text-sm font-bold text-cyan-400 bg-white/5 px-3 py-1.5 rounded-md border border-white/10 w-full block text-center mb-4 shadow-sm cursor-pointer select-none hover:bg-white/10 transition-colors relative group",onContextmenu:t[20]||(t[20]=R(o=>de(o),["prevent"])),onDblclick:t[21]||(t[21]=o=>F.value=!0),title:"Doble click para administrar"},[t[68]||(t[68]=I(" LOG√çSTICA ",-1)),e("button",{onClick:t[19]||(t[19]=R(o=>W.value=!0,["stop"])),class:"absolute right-2 top-1/2 -translate-y-1/2 text-white/30 hover:text-cyan-400 transition-colors",title:"Administrar Transportes"},[...t[67]||(t[67]=[e("i",{class:"fa-solid fa-truck"},null,-1)])])],32)]),e("div",Oo,[(n(!0),i(T,null,U(c.value.filter(o=>o.activo!==!1),o=>(n(),i("div",{key:o.id,onClick:V=>ee(o),onDblclick:V=>O(o),onContextmenu:R(V=>de(V,o),["prevent"]),class:A(["bg-white/5 border rounded-lg p-3 transition-all cursor-pointer group relative",z.value===o.id?"border-cyan-500/50 bg-cyan-500/5 ring-1 ring-cyan-500/20":"border-white/10 hover:border-white/20"])},[e("div",Ro,[o.es_fiscal?(n(),i("span",jo,"FISCAL")):(n(),i("span",zo,"SUCURSAL")),e("button",{onClick:R(V=>O(o),["stop"]),class:"text-[10px] text-white/30 hover:text-white opacity-0 group-hover:opacity-100 transition-opacity"},[...t[69]||(t[69]=[e("i",{class:"fa-solid fa-pencil"},null,-1)])],8,Fo)]),e("p",Po,v(o.calle)+" "+v(o.numero),1),e("p",Mo,v(o.localidad),1),e("div",Bo,[t[70]||(t[70]=e("i",{class:"fa-solid fa-truck"},null,-1)),I(" "+v(o.transporte?.nombre||o.transporte_nombre||"Sin Transporte"),1)])],42,Uo))),128)),e("button",{onClick:t[22]||(t[22]=o=>O()),class:"w-full py-2 border border-dashed border-white/10 rounded-lg text-white/30 hover:text-cyan-400 hover:border-cyan-500/30 hover:bg-cyan-500/5 transition-all flex items-center justify-center gap-2 text-xs font-bold uppercase"},[...t[71]||(t[71]=[e("i",{class:"fa-solid fa-plus"},null,-1),I(" Agregar Domicilio ",-1)])])])]),e("section",null,[e("div",{class:"flex items-center justify-between mb-3"},[t[73]||(t[73]=e("h3",{class:"text-sm font-bold text-cyan-400 bg-white/5 px-3 py-1.5 rounded-md border border-white/10 w-full block text-center mb-4 shadow-sm"},"CONTACTOS",-1)),e("button",{onClick:ge,class:"text-cyan-400 hover:text-cyan-300 text-xs"},[...t[72]||(t[72]=[e("i",{class:"fa-solid fa-plus"},null,-1)])])]),e("div",Go,[(n(!0),i(T,null,U(a.value,o=>(n(),i("div",{key:o.id,class:"bg-white/5 border border-white/10 rounded-lg p-3 transition-colors group"},[e("div",Ko,[e("div",Ho,v(o.nombre?o.nombre.substring(0,2).toUpperCase():"NN"),1),e("div",qo,[e("div",Jo,[e("p",Wo,v(o.nombre),1),e("button",{onClick:V=>ye(o),class:"text-[10px] text-white/30 hover:text-white opacity-0 group-hover:opacity-100 transition-opacity"},[...t[74]||(t[74]=[e("i",{class:"fa-solid fa-pencil"},null,-1)])],8,Xo)]),e("p",Yo,v(o.rol||"Sin Rol"),1)])])]))),128)),a.value.length===0?(n(),i("div",Qo,[...t[75]||(t[75]=[e("p",{class:"text-xs text-white/30"},"Sin contactos",-1)])])):g("",!0)])])])]),m.value?(n(),i("div",Zo,[e("div",el,[t[76]||(t[76]=e("h3",{class:"text-lg font-bold text-white mb-4"},"Nuevo Segmento",-1)),y(e("input",{"onUpdate:modelValue":t[23]||(t[23]=o=>P.value=o),onKeydown:Ne(ie,["enter"]),type:"text",class:"w-full bg-black/20 border border-white/10 rounded p-2 text-white focus:border-cyan-400 outline-none mb-4",placeholder:"Nombre del Segmento",autofocus:""},null,544),[[$,P.value]]),e("div",tl,[e("button",{onClick:t[24]||(t[24]=o=>m.value=!1),class:"text-white/50 hover:text-white text-sm"},"Cancelar"),e("button",{onClick:ie,class:"bg-cyan-600 hover:bg-cyan-500 text-white px-4 py-2 rounded text-sm font-bold"},"Crear")])])])):g("",!0),te(Oe,{show:H.value,id:q.value,onClose:$e,onSaved:Se},null,8,["show","id"]),j.value?(n(),G(Ue,{key:1,isStacked:!0,class:"fixed inset-0 z-[60] bg-white m-4 rounded-lg shadow-2xl overflow-hidden",onClose:t[25]||(t[25]=o=>j.value=!1)})):g("",!0),F.value?(n(),G(wt,{key:2,domicilios:c.value,class:"fixed inset-0 z-[60] m-4 rounded-lg shadow-2xl overflow-hidden",onClose:t[26]||(t[26]=o=>F.value=!1),onCreate:t[27]||(t[27]=o=>{O(),F.value=!1}),onEdit:t[28]||(t[28]=o=>{O(o),F.value=!1}),onDelete:t[29]||(t[29]=o=>ue(o))},null,8,["domicilios"])):g("",!0),W.value?(n(),i("div",ol,[e("div",ll,[te(Re,{isModal:!0,onClose:t[30]||(t[30]=o=>W.value=!1)})])])):g("",!0),M.value&&s.value.id?(n(),G(Nt,{key:4,show:M.value,clienteId:String(s.value.id),contacto:X.value,onClose:t[31]||(t[31]=o=>M.value=!1),onSaved:_e},null,8,["show","clienteId","contacto"])):g("",!0),te(je,{modelValue:C.show,"onUpdate:modelValue":t[32]||(t[32]=o=>C.show=o),x:C.x,y:C.y,actions:C.actions,onClose:t[33]||(t[33]=o=>C.show=!1)},null,8,["modelValue","x","y","actions"])]))}};export{il as default};
